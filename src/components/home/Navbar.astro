---
// ナビゲーションバーの画像背景を表示する (class名)
const { isBackGroundImage } = Astro.props;

// タブレット版
const link_pc =
	"text-sm text-white font-thin mx-6  hover:text-orange-400 trasition duration-400 hover:italic";
const linkLanguage_pc =
	"block py-2 text-sm mx-2 ms-4 text-slate-500 hover:italic hover:text-orange-600 hover:ps-1";

// スマホ版
const link =
	"block p-4 text-sm text-gray-400 hover:italic hover:text-orange-600 rounded hover:ms-1";
const linkLanguage =
	"block px-4 py-2 text-sm text-gray-500 ms-6 hover:italic hover:text-orange-600 my-1 hover:ps-5";
---

<nav
	class:list={[
		"hidden md:block px-10 text-right py-6",
		{ navbarBackGroundImage: isBackGroundImage },
	]}
>
	<ul class="flex justify-end">
		<li><a href="/" class={link_pc}>ホーム</a></li>
		<li><a href="/about" class={link_pc}>当社について</a></li>
		<li><a href="/product" class={link_pc}>商品一覧</a></li>
		<li><a href="/contact" class={link_pc}>お問い合せ</a></li>
		<li class="relative">
			<div class="group">
				<a class="text-sm text-white font-light mx-6" href="#"
					>Language<svg
						xmlns="http://www.w3.org/2000/svg"
						class="w-2 fill-white inline ml-1"
						viewBox="0 0 24 24"
					>
						<path
							fill-rule="evenodd"
							d="M11.99997 18.1669a2.38 2.38 0 0 1-1.68266-.69733l-9.52-9.52a2.38 2.38 0 1 1 3.36532-3.36532l7.83734 7.83734 7.83734-7.83734a2.38 2.38 0 1 1 3.36532 3.36532l-9.52 9.52a2.38 2.38 0 0 1-1.68266.69734z"
							clip-rule="evenodd"
							data-original="#000000"></path>
					</svg></a
				>
				<!-- Dropdown menu -->
				<div
					class="absolute text-left w-32 bg-slate-50 opacity-85 rounded invisible group-hover:visible transition duration-500"
				>
					<a href="#" class={linkLanguage_pc}>🇺🇸 English</a>
					<a href="#" class={linkLanguage_pc}>🇵🇪 Español</a>
					<a href="#" class={linkLanguage_pc}>🇧🇷 Português</a>
					<a href="#" class={linkLanguage_pc}>🇯🇵 日本語</a>
				</div>
			</div>
		</li>
	</ul>
</nav>

<!-- バーガーメニューの背景色（影） -->
<div
	class="fadeIn navbar-menu md:hidden z-10 hidden fixed top-0 left-0 bg-black opacity-90 h-full w-full"
>
</div>

<!-- サイドメニュー （バーガーボタン） -->
<nav
	class:list={[
		"md:hidden relative flex justify-end items-center p-6",
		{ navbarBackGroundImage: isBackGroundImage },
	]}
>
	<button
		class="navbar-burger flex items-center text-gray-600 bg-slate-50 p-2 rounded shadow-2xl"
	>
		<svg
			class="block h-4 w-4 fill-current"
			viewBox="0 0 20 20"
			xmlns="http://www.w3.org/2000/svg"
		>
			<title>Mobile menu</title>
			<path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
		</svg>
	</button>
</nav>
<!-- サイドメニューコンテンツ -->
<!-- --- md:hidden is necesary --- -->
<div class="navbar-menu relative z-10 hidden md:hidden">
	<nav
		class="slideinRight fixed top-0 right-0 h-screen flex flex-col w-72 p-7 bg-white bg-opacity-95 transition duration-1000"
	>
		<div class="flex items-center justify-end">
			<button class="navbar-close">
				<svg
					class="h-6 w-6 text-gray-400 cursor-pointer hover:text-gray-500"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M6 18L18 6M6 6l12 12"></path>
				</svg>
			</button>
		</div>
		<div>
			<ul>
				<li class="mb-1">
					<a class={link} href="/">ホーム</a>
				</li>
				<li class="mb-1">
					<a class={link} href="/about">私達について</a>
				</li>
				<li class="mb-1">
					<a class={link} href="/product">商品一覧</a>
				</li>
				<li class="mb-1">
					<a class={link} href="/contact">お問い合せ</a>
				</li>
				<li class="relative">
					<div class="group">
						<a class="block p-4 text-sm text-gray-400" href="#"
							>Language<svg
								xmlns="http://www.w3.org/2000/svg"
								class="w-2 fill-gray-400 inline ml-1"
								viewBox="0 0 24 24"
							>
								<path
									fill-rule="evenodd"
									d="M11.99997 18.1669a2.38 2.38 0 0 1-1.68266-.69733l-9.52-9.52a2.38 2.38 0 1 1 3.36532-3.36532l7.83734 7.83734 7.83734-7.83734a2.38 2.38 0 1 1 3.36532 3.36532l-9.52 9.52a2.38 2.38 0 0 1-1.68266.69734z"
									clip-rule="evenodd"
									data-original="#000000"></path>
							</svg></a
						>
						<!-- Dropdown menu -->
						<div
							class="absolute w-full bg-slate-50 rounded invisible opacity-85 group-hover:visible transition"
						>
							<a href="/en" class={linkLanguage}>🇺🇸 English</a>
							<a href="/es" class={linkLanguage}
								>🇵🇪 Español</a
							>
							<a href="/pt" class={linkLanguage}>🇧🇷 Português</a>
							<a href="/" class={linkLanguage}>🇯🇵 日本語</a>
						</div>
					</div>
				</li>
			</ul>
		</div>
		<div class="mt-auto">
			<p class="my-4 text-xs text-center text-gray-400">
				AIPE Copyright © 2024
			</p>
		</div>
	</nav>
</div>

<style>
	/* ナビゲーション背景 */
	.navbarBackGroundImage {
		background-image: url(/images/navbar-bg.jpeg);
		/* El margen es necesario */
		margin: 0.5rem;
	}
	/* サイドメニューの影 */
	.fadeIn {
		animation-name: fadeInAnime;
		animation-duration: 0.4s;
	}
	@keyframes fadeInAnime {
		0% {
			opacity: 0;
		}
		100% {
			opacity: 1;
		}
	}
	/* サイドメニュー右からスライドイン */
	.slideinRight {
		animation: slideinRight 0.5s;
	}

	@keyframes slideinRight {
		0% {
			transform: translateX(100%);
		}
		100% {
			transform: translate(0);
		}
	}
</style>

<script>
	// Burger menus
	document.addEventListener("DOMContentLoaded", function () {
		// open
		const burger = document.querySelectorAll(".navbar-burger");
		const menu = document.querySelectorAll(".navbar-menu");

		if (burger.length && menu.length) {
			for (var i = 0; i < burger.length; i++) {
				burger[i].addEventListener("click", function () {
					for (var j = 0; j < menu.length; j++) {
						menu[j].classList.toggle("hidden");
					}
				});
			}
		}

		// close
		const close = document.querySelectorAll(".navbar-close");
		const backdrop = document.querySelectorAll(".navbar-backdrop");

		if (close.length) {
			for (var i = 0; i < close.length; i++) {
				close[i].addEventListener("click", function () {
					for (var j = 0; j < menu.length; j++) {
						menu[j].classList.toggle("hidden");
					}
				});
			}
		}

		if (backdrop.length) {
			for (var i = 0; i < backdrop.length; i++) {
				backdrop[i].addEventListener("click", function () {
					for (var j = 0; j < menu.length; j++) {
						menu[j].classList.toggle("hidden");
					}
				});
			}
		}
	});
</script>
